<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch</title>

    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">

    <!-- custom css file link  -->
    <link rel="stylesheet" href="css/style.css">

</head>
<body>

    <section class="watch-video">

        <div class="video-container">
            <div class="video">
                <video src="images/module2les1.mp4" controls poster="images/Frame 284.png" id="video"></video>
            </div>
            <h3 class="title">Complete PYTHON tutorial (part 04)</h3>
            <div class="info">
                <p class="date"><i class="fas fa-calendar"></i><span>21.04.24</span></p>
            </div>
            <div class="tutor">
                <img src="images/thumb1.png" alt="">
                <div>
                    <h3>Module 2</h3>
                    <span>Python</span>
                </div>
            </div>
            <a href="Playlist1" class="inline-btn">Back</a>
            <p class="description">
                In fact, if you want to get into data science and machine learning, Python is THE language that you must learn. Python and Django (a popular Python framework) are also very popular choices for building the backend of web applications. Small or big companies use Python to re-write their existing applications or build new applications. Instagram, DropBox, and YouTube are examples of websites built with Python. Well, more accurately, the backend of these applications is built with Python and Django.
            </p>
        </div>

    </section>

    <section class="comments">

        <h1 class="heading">2 comments</h1>

        <form id="comment-form" class="add-comment">
            <h3>Add comments</h3>
            <textarea name="comment_box" id="comment-box" placeholder="enter your comment" required maxlength="1000" cols="30" rows="10"></textarea>
            <input type="submit" value="add comment" class="inline-btn" name="add_comment">
        </form>

        <h1 class="heading">user comments</h1>

        <div id="comment-container" class="box-container">
            <!-- Comments will be dynamically added here -->
        </div>

    </section>

    <!-- custom js file link  -->
    <script src="js/script.js"></script>
    <script>
        // Function to delete a comment
        function deleteComment(index) {
            var comments = JSON.parse(localStorage.getItem('comments')) || [];
            comments.splice(index, 1); // Remove the comment at the specified index
            localStorage.setItem('comments', JSON.stringify(comments));
            loadComments(); // Reload comments
        }

        // Event listener for form submission
        document.getElementById('comment-form').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent default form submission

            // Get the comment text
            var comment = document.getElementById('comment-box').value;

            // Check if Local Storage is supported
            if (typeof (Storage) !== "undefined") {
                // Retrieve existing comments or initialize as an empty array
                var comments = JSON.parse(localStorage.getItem('comments')) || [];

                // Add the new comment
                comments.push(comment);

                // Save the comments back to Local Storage
                localStorage.setItem('comments', JSON.stringify(comments));

                // Clear the comment box
                document.getElementById('comment-box').value = '';

                // Reload comments
                loadComments();
            } else {
                alert("Sorry, your browser does not support web storage. Comments cannot be saved.");
            }
        });

        // Function to load comments from Local Storage and display them
        function loadComments() {
            var commentContainer = document.getElementById('comment-container');
            commentContainer.innerHTML = ''; // Clear existing comments

            // Retrieve comments from Local Storage
            var comments = JSON.parse(localStorage.getItem('comments')) || [];

            // Loop through comments and create HTML elements to display them
            comments.forEach(function (commentText, index) {
                var box = document.createElement('div');
                box.classList.add('box');

                var userDiv = document.createElement('div');
                userDiv.classList.add('user');

                var img = document.createElement('img');
                img.setAttribute('src', 'images/pic-1.png');
                img.setAttribute('alt', '');

                var userContent = document.createElement('div');

                var userName = document.createElement('h3');
                userName.textContent = 'Учень'; // You can replace this with actual user name

                var commentDate = document.createElement('span');
                commentDate.textContent = new Date().toLocaleDateString(); // You can format date as needed

                userContent.appendChild(userName);
                userContent.appendChild(commentDate);

                userDiv.appendChild(img);
                userDiv.appendChild(userContent);

                var commentBox = document.createElement('div');
                commentBox.classList.add('comment-box');
                commentBox.textContent = commentText;

                // Create delete button
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.classList.add('delete-btn');
                deleteButton.addEventListener('click', function () {
                    deleteComment(index);
                });

                // Append delete button to commentBox
                box.appendChild(userDiv);
                box.appendChild(commentBox);
                box.appendChild(deleteButton);

                commentContainer.appendChild(box);
            });
        }

        // Call the loadComments function when the page loads to display existing comments
        window.onload = loadComments;
    </script>

</body>
</html>
